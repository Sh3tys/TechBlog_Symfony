{% extends 'base.html.twig' %} {% block title %}Mes articles - TechBlog{%
endblock %} {% block body %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Mes articles</h1>
    <a href="{{ path('app_article_new') }}" class="btn btn-primary">
        Nouvel article
    </a>
</div>

{% if articles is empty %}
<div class="alert alert-info">
    Aucun article.
    <a href="{{ path('app_article_new') }}" class="ms-2">Créer un article</a>
</div>
{% else %}
<div class="table-responsive">
    <table class="table table-sm table-hover">
        <thead class="table-light">
            <tr>
                <th>Titre</th>
                <th>Date</th>
                <th>Statut</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for article in articles %}
            <tr>
                <td>
                    <a
                        href="{{
                            path('app_article_show', { id: article.id })
                        }}"
                    >
                        {{ article.titre }}
                    </a>
                </td>
                <td>{{ article.dateCreation|date('d/m/Y') }}</td>
                <td>
                    {% if article.publie %} Publié {% else %} Brouillon {% endif
                    %}
                </td>
                <td class="text-end">
                    <a
                        href="{{
                            path('app_article_edit', { id: article.id })
                        }}"
                        class="btn btn-sm btn-outline-secondary"
                    >
                        Modifier
                    </a>
                    <form
                        method="post"
                        action="{{
                            path('app_article_delete', { id: article.id })
                        }}"
                        onsubmit="return confirm('Supprimer ?');"
                        class="d-inline"
                    >
                        <input
                            type="hidden"
                            name="_token"
                            value="{{ csrf_token('delete' ~ article.id) }}"
                        />
                        <button class="btn btn-sm btn-outline-danger">
                            Supprimer
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

<div class="mt-3">
    <a href="{{ path('app_article_index') }}" class="btn btn-secondary btn-sm">
        Voir les articles
    </a>
</div>
{% endblock %}
